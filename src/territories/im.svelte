<script>
	import { draw } from 'svelte/transition';
	import { linear } from 'svelte/easing';
	import { expand } from '../transitions/expand';

	export let style;
	export let drawin = { duration: 1000 };
	export let flagexpand = { duration: 400, delay: 1000, easing: linear };
	export let strokeColor = 'black';
	export let fill = 'transparent';
	export let mainColor = 'black';
	export let showFlag = false;
	export let strokeWidth = 5;
	$: pathStyle = `stroke: ${showFlag ? mainColor : strokeColor}; fill: ${
		showFlag ? 'url(#im)' : fill
	}; stroke-width: ${strokeWidth};`;

	const preserveAspectRatio = 'xMidYMid slice';
</script>

<svg
	{style}
	version="1.0"
	xmlns="http://www.w3.org/2000/svg"
	width="1365.333"
	height="1365.333"
	viewBox="0 0 1024 1024"
>
	<defs
		><pattern id="im" patternUnits="userSpaceOnUse" width="100%" height="100%">
			{#key showFlag}
				<svg
					{preserveAspectRatio}
					in:expand={flagexpand}
					xmlns="http://www.w3.org/2000/svg"
					xmlns:xlink="http://www.w3.org/1999/xlink"
					viewBox="0 0 600 300"
					><path d="M0 0h600v300H0z" fill="#cf142b" /><g
						fill="#f9dd16"
						stroke="#000"
						transform="matrix(1.05678 .03432 -.03393 1.03889 -14.505 -31.147)"
						><g id="a"
							><path
								d="M225.97 126.346c.22.225 2.857 1.819 2.903 1.73.046-.088 6.903-1.67 6.857-1.581-.045.088-3.842 4.6-3.665 4.692.176.091 3.967 4.63 4.055 4.676.088.046-7.18-.597-7.18-.597l-4.807 3.876-1.076-5.03s-6.047-2.134-6.135-2.18c-.088-.045 5.175-1.785 5.175-1.785l1.57-4.103s2.036.387 2.303.302z"
							/><path
								d="M314.466 136.204c.014-4.24-8.335-23.424-9.71-26.374-2.557-3.2-5.263-8.27-6.426-12.647-.753-4.42-3.117-7.885-6.449-9.06-3.845-2.041-7.6-1.241-11.214-.927-1.772.377-3.289 1.334-4.145 2.744-1.952 2.792-3.013 2.58-4.363 3.782-11.113 1.732-21.623 7.467-29.618 11.376-4.234 2.939-7.828 4.646-9.493 5.005-4.514.017-7.797-2.122-9.365-3.26l-15.337-13.946c-4.43-3.307-5.527 1.467-4.676 2.196 1.48 3.18-1.723 5.115 10.438 16.57l4.606 9.465s-.255 2.588-.041 2.699c2.22 5.289 5.747 3.97 7.412 2.487l3.613-3.291s7.16-2.267 7.272-2.48c7.679 1.142 27.465-2.627 30.727-4.176 2.94-1.646 3.128-.252 5.675-2.326 2.13-1.41.959-.288 4.893-3.883 1.211-1.042 2.17.645 2.395 1.824.22 11.17 1.587 18.306 2.606 29.443l16.733 8.574z"
								fill="#fff"
								stroke-width="1.3"
							/><path
								d="M217.839 102.282c.153.135-2.764 9.631-2.764 9.631s-2.689-2.681-2.666-2.725l1.883-9.977z"
								stroke="none"
							/><g fill="none"
								><path
									d="M217.922 101.929c-.133.642-.698 3.504-.961 4.287-.22.866-.417 1.74-.563 2.607-.27.948-.388 1.568-.688 2.543-.096.835-.271 1.619-.484 2.455m-1.851-16.246c.06.123.275.985.307 1.54-.102.582-.264 2.667-.487 3.373a26.764 26.764 0 0 0-.436 2.362c-.223.857-.31 1.42-.56 2.3-.058.76-.195 1.47-.367 2.226"
									stroke-width="1.13"
								/><path
									d="M262.227 96.635c3.578 3.982 4.688 10.454 4.04 14.077m-17.883 9.51.065-.124c-.203.39-.046.167-.429-.698-.406-.448-.692-2.625-.067-3.828.24-.614.64-1.538.942-2.12.086-.165.33-.33.416-.496m-26.515-6.177-.065.124-.258.498c-.335.646-.787 1.234-1.094 1.804-.324.622-.823 1.153-1.147 1.776-.415.582-.78 1.355-1.21 1.957-.402.716-.85 1.226-1.244 1.985-.34.6-.614.877-.966 1.555l.966-1.555c-.34.6-.614.877-.966 1.555m-7.009-21.82c.062.117.304.93.354 1.449-.08.54-.167 2.48-.361 3.132a23.075 23.075 0 0 0-.347 2.19c-.19.793-.256 1.315-.472 2.127-.03.71-.14 1.367-.282 2.067m16.698 11.933c-.84-.883-1.333-.56-1.873-.6-.598.106-1.684.606-2.787 1.715-.403.439-.741.762-1.274 1.235-.24.373-.437.514-.702.743m69.719-32.889-.065.125c.203-.39.056-.17.24.757.242.64.271 1.083.539 1.702m-13.771.874c-.043.083-.152 9.118.222 10.283.112.745.313 1.37.417 2.261.001.537.127.987.165 1.51.306.576.37 1.155.684 1.618.153.638.664.664.938 1.259.382.412 1.01 1.139 1.388 1.465m-10.091 6.339c-.278-.095-.992-.66-1.601-.963-.687-.388-2.382-2.41-2.463-3.835"
								/><path
									d="M275.902 103.13c-.022.042-.942.948-2.448 2.479-1.927 1.783-7.17 4.852-7.8 5.1-.604.273-1.358.93-1.954 1.023-.685.273-1.368.38-2.016.534-.791.167-1.462.311-2.076.345-1.843.802-11.554.49-12.055.381a21.406 21.406 0 0 1-1.693-.088c-.462.11-1.009.064-1.633.1-.755-.061-1.188.084-1.823.161-.5.264-1.333.537-1.896.913-.772.312-1.24.737-1.773.976-.554.458-8.11 4.867-8.476 5.064-.793.35-3.64 1.195-4.353-.807-.183-.787-.546-1.6-.568-2.202-.229-.721-.099-1.492-.061-2.165.661-3.41 1.756-4.753 2.058-5.335l.323-.622m70.224-12.548-.065.124c.175-.336.094-.16-.383.434-.486.392-1.086 1.014-1.527 1.42-.446.441-.874 1.066-1.274 1.235-.402.526-.91.692-1.459.982a9.901 9.901 0 0 0-1.896.912c-.82.436-1.33.852-2.09 1.287-.47.597-.946.969-1.344 1.673-.394.653-.787 1.213-1.159 1.928l-.905 1.744.905-1.744-.905 1.744m5.789 36.046.13-.25c-.24.461-.156.34.069-.437.002-.933.223-2.061.233-2.884.14-.871.282-1.812.291-2.694-.053-1.032-.051-1.957-.205-2.952-.012-.916-.12-1.866-.147-2.764-.016-.889-.083-1.65-.276-2.514-.017-.646-.057-1.533-.215-2.325.085-.624-.093-1.198-.226-1.698-.241-.962-.335-1.523-.588-2.52-.153-.533-.304-1.216-.534-2.015-.083-.758-.489-1.742-.654-2.395-.225-.48-.452-1.13-.54-1.702-.235-.528-.571-1.171-.663-1.768-.248-.455-.513-1.162-.787-1.832-.237-.55-.411-1.228-.664-1.767-.254-.68-.564-1.262-.723-1.956-.243-.236-.298-.494-.429-.697"
								/></g
							><path
								d="M289.89 91.736c-.845 1.932-3.022 4.754-3.054 4.816l-2.072 4.142c-.912 2.267-.33 3.175.068 3.83.825 1.455.97 2.242 1.58 3.35.23 1.383-2.224 1.849-2.257 1.911-5.11 1.773-7.702-3.13-7.729-3.381-.693-2.573-.603-3 .963-3.531 1.796-.412 2.517-.433 3.406-1.078 1.682-1.26 2.87-5.07 2.902-5.133.032-.063.252-2.161.252-2.161.131-1.013-.337-1.94.18-3.543.672-1.548 1.076-1.97 2.667-2.093 2.074-.188 3.684 1.28 3.094 2.871z"
							/></g
						><use transform="rotate(120 300 150)" xlink:href="#a" width="100%" height="100%" /><use
							transform="rotate(-120 300 150)"
							xlink:href="#a"
							width="100%"
							height="100%"
						/><path
							d="M304.618 169.37c-1.774-.903-3.127-1.083-3.774-.646-1.027-5.746-1.932-11.499-3.251-17.227-10.896-4.537-13.199-5.573-16.774-7.127 1.669-1.085 2.502-2.167 2.446-2.945 5.49 1.983 10.925 4.076 16.545 5.797 9.377-7.167 11.426-8.644 14.56-10.963.104 1.988.625 3.25 1.327 3.592-4.462 3.762-8.993 7.422-13.294 11.43 1.52 11.704 1.773 14.216 2.215 18.089z"
							stroke-width="1.3"
						/></g
					></svg
				>
			{/key}
		</pattern></defs
	><path
		fill="url(#flag)"
		in:draw={drawin}
		style={pathStyle}
		d="M795.7 6.9c-6.4 3.8-13.9 7.6-16.5 8.6-2.6 1-16.2 6.7-30.2 12.7C709.6 45.1 692.9 50 675 50c-7 0-8.5.4-14.2 3.4-16 8.4-37.7 23.3-77.8 53.1-15.7 11.7-32.4 23.7-37 26.7-13.8 9-18.4 13.1-24.3 22-11.5 17.3-16.4 30.2-17.7 45.8-1.2 15.4-6.3 35.5-11.6 46.1-1.3 2.5-4.5 6.5-7.3 8.8-3.6 3-6.8 7.3-11.4 15.4-14.5 25.3-19.8 39-27.7 71.2-7.5 30.6-9.7 36.2-19 50-2.6 3.8-6.9 11.3-9.6 16.5-5.4 10.6-8.5 14.4-35.9 44.5-35.6 39-38.4 42.3-42.7 51.3-4 8.3-4 8.4-13.6 14.6-19.6 12.7-47.7 28.6-50.5 28.6-.8 0-2.9-1.1-4.5-2.5-1.7-1.4-3.4-2.5-3.8-2.5-.5 0-2.2 3.2-3.7 7-2.5 6.2-3.3 7.2-7.1 8.8-3.9 1.8-12.4 11.2-20.5 23-3.1 4.4-3 5.8 1.3 18.1s4.4 15.2 1.1 22.3c-1.7 3.6-2.5 7.1-2.5 10.8 0 3-.7 9.8-1.5 15-2.1 13.1-7.2 21.4-22.7 37.6-6.4 6.7-12.4 13.7-13.3 15.5-1.4 2.6-1.6 5.1-1.3 12.3.5 11.5 2.8 16.7 10.2 23.9 5.3 5.1 5.6 5.7 5.6 10.3 0 2.7-.9 8.6-2 13.2l-2 8.3 3 6.2 3 6.2-4 15.9c-2.5 9.9-4 18.1-4 22 0 5.4-.4 6.7-3.6 11.1-8 11-15.3 22.7-16.5 26.2-.6 2.1-2 6.1-3.1 9-1.8 5-1.9 5.1-4.7 4-4-1.5-6.8-.4-13.8 5.2-4.5 3.7-6.3 5.9-6.8 8.3-.9 4.3-3.5 8.4-10.6 16.9-7.8 9.4-8.8 15-3.8 22.1 1.9 2.6 2.6 2.8 8.7 2.9 8.8 0 13.4 1.6 14.6 5.1.7 2 .5 3.3-.7 5.2-1.7 2.5-2.6 2.9-9.9 4.1-3.2.5-4.1 1.3-7.1 6.8-5.7 10-9.2 14.3-15.4 18.5-7 4.8-9.5 7.6-11.3 12.2-.7 1.9-2.6 6.6-4.2 10.3-3.9 9.1-3.6 13.3 1.2 16.3 7.4 4.7 9.8 7.5 12.2 13.7l2.4 6.2 4.5.3c2.5.2 6.8-.1 9.5-.5 3.8-.7 4.9-1.3 5.1-2.8.1-1.1.5-4.5.8-7.6l.6-5.6 11.4.1c10.8.1 11.4 0 14-2.4 3.6-3.3 7.1-10.3 9.1-18.4 1-4.1 2.2-6.6 3-6.6.8 0 4.4 1.6 8.1 3.6 5.1 2.7 7.5 3.4 9.7 3 6.6-1.3 7.1-4.7 2.5-16.2-1.6-4.3-2.9-8.9-2.7-10.3.3-2.7 0-2.7 9.3-1.8 1.8.2 2.1-.5 2.5-6.5.4-5.7.9-7.2 3.2-9.5 2.7-2.6 3.2-2.7 19-3.6 28.1-1.5 33.3-.4 36.4 7.3 1 2.4 4.1 6.1 8.3 9.8 3.9 3.5 7.5 7.7 8.6 10.2 1.8 4 1.8 4.3.1 9-4 11.2 2.4 18.3 21.2 24 4.1 1.2 8 1.9 8.8 1.6 2.2-.9 4.4-6.9 4.4-12.2 0-9.3 5.7-16 20.8-24.6 12.4-7 15.7-7.6 26.1-4.3 8.5 2.7 15.6 7.3 18.1 11.8 1.3 2.4 1.3 3.3-.3 9.4-2 7.8-6.5 17.4-13.6 29.2-2.8 4.6-5 8.6-4.8 8.7.3.4 18.4 4.4 19.6 4.4 1.7 0 6.4-7.6 17.1-27.5 5.6-10.5 12.3-22.6 14.8-26.9l4.6-7.9-2.5-1.9c-5.3-4.3-16.9-16.1-16.9-17.2 0-2.8 10.5-16.8 18.2-24.2 10.4-10 20.7-17 35.2-24l11.1-5.4h17.3c19.4 0 20.5-.3 26.5-6.9 2.9-3.2 3.9-5.5 5.3-12.2 1-4.5 2.7-9.6 3.9-11.3 1.1-1.7 5.7-5.3 10.3-8l8.2-4.8v-7.7c.1-8 1.6-14 4.6-17.2 6-6.7 22.8-9.7 33.9-6.1 4.4 1.5 6.5 1.7 8 1 1.1-.6 6.5-5.4 12-10.7C621.3 791.7 626 788 634 784c9-4.5 19.8-11.8 21.6-14.6 2.5-3.8-.8-9.4-11.9-20.4-6-5.8-9.7-10.2-9.7-11.5 0-5.5 8.3-18.8 17.1-27.6 8.7-8.7 10.2-9.3 23.3-8.5 10.3.6 11.7.5 19.1-1.9 13.5-4.4 31.5-15.1 31.5-18.6 0-3.9 6.8-9.1 15.7-12.2 4.5-1.6 10.2-4.2 12.7-5.7 4.3-2.7 5.2-4.4 9-15.5.2-.6 3-4.4 6.3-8.5 12.2-15.5 14.9-21.1 12.5-25.7-.6-1.1-4.6-6.2-8.8-11.4-8.6-10.5-13.2-19.2-14-26.5-.5-4.3 0-5.9 3.4-12.9 4.3-8.8 10-16.8 14.8-20.9 1.8-1.4 6.9-4.3 11.5-6.4 14.8-6.8 20.3-16.2 24.9-42.2 2.8-15.6 5.4-20.5 20.4-38 15.7-18.3 18.2-22.4 19.6-31.8 1.3-9.5 3.7-13.2 16.9-26.2 12.1-12 17.5-18.4 19-22.3.6-1.5 1.9-7 3-12.2 2.2-10.9 4.4-14.5 10.5-17.3 3.1-1.5 4.7-3 5.5-5.3 1.6-4.7 1.3-9.5-.9-13.8-5.1-10.1-19.2-16.4-49.4-22-10.8-2-13-3-20.9-9.3l-2.8-2.3-2.5 3.3c-1.8 2.2-3.4 3.2-5.2 3.2-4.4 0-15-6.9-23.7-15.5l-8.2-8-3.6-15c-4.2-16.9-7.2-34.2-8.2-46-1.7-20.4 6.1-56.1 18.6-85.1 7.2-16.7 9.7-24.5 11.4-34.9C815 78.6 818 39.1 818 21V3.4l-3.5-1.7c-2-.9-4.3-1.7-5.3-1.7-.9 0-7 3.1-13.5 6.9z"
	/></svg
>
